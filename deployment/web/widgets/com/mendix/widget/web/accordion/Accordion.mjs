import{createElement as e,useState as a,useRef as n,useCallback as o,useEffect as t,useReducer as l,useMemo as i}from"react";import"react-dom";var r,c={exports:{}};
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/r=c,function(){var e={}.hasOwnProperty;function a(){for(var n=[],o=0;o<arguments.length;o++){var t=arguments[o];if(t){var l=typeof t;if("string"===l||"number"===l)n.push(t);else if(Array.isArray(t)){if(t.length){var i=a.apply(null,t);i&&n.push(i)}}else if("object"===l)if(t.toString===Object.prototype.toString)for(var r in t)e.call(t,r)&&t[r]&&n.push(r);else n.push(t.toString())}}return n.join(" ")}r.exports?(a.default=a,r.exports=a):window.classNames=a}();var d=c.exports;const s=a=>{let{icon:n,className:o="",fallback:t}=a;return"glyph"===(null==n?void 0:n.type)?e("span",{className:d("glyphicon",o,n.iconClass),"aria-hidden":!0}):"image"===(null==n?void 0:n.type)?e("img",{className:o,src:n.iconUrl,"aria-hidden":!0,alt:""}):t||null};function u(l){var i;const{animateContent:r,changeFocus:c,showHeaderIcon:s,toggleCollapsed:u,onToggleCompletion:p}=l,[g,v]=a(l.collapsed),h=n(g),m=n(!1),w=n(null),b=n(null),f=n(null),C=o((()=>{b.current&&w.current&&m.current&&(g?(w.current.classList.remove("widget-accordion-group-expanding"),b.current.style.height="",v(!1)):(w.current.classList.add("widget-accordion-group-collapsed"),w.current.classList.remove("widget-accordion-group-collapsing"),v(!0)),m.current=!1)}),[g]);t((()=>{l.collapsed!==g&&w.current&&b.current&&f.current&&r?(m.current=!0,l.collapsed?(b.current.style.height="".concat(f.current.getBoundingClientRect().height,"px"),w.current.classList.add("widget-accordion-group-collapsing"),setTimeout((()=>{b.current&&(b.current.style.height="")}),50)):(w.current.classList.add("widget-accordion-group-expanding"),w.current.classList.remove("widget-accordion-group-collapsed"),setTimeout((()=>{b.current&&f.current&&(b.current.style.height="".concat(f.current.getBoundingClientRect().height,"px"))}),50))):l.collapsed===g||r&&l.visible||v(l.collapsed)}),[l.collapsed,l.visible,g,r]),t((()=>{g!==h.current&&(h.current=g,null==p||p(l.collapsed))}),[l.collapsed,p,g]);const x=o((e=>{switch(e.key){case"Enter":case" ":e.preventDefault(),null==u||u();break;case"Home":e.preventDefault(),null==c||c(e.currentTarget,"first");break;case"End":e.preventDefault(),null==c||c(e.currentTarget,"last");break;case"Up":case"ArrowUp":e.preventDefault(),null==c||c(e.currentTarget,"previous");break;case"Down":case"ArrowDown":e.preventDefault(),null==c||c(e.currentTarget,"next")}}),[u,c]);return l.visible?e("section",{ref:w,className:d("widget-accordion-group",{"widget-accordion-group-collapsed":g},l.dynamicClassName)},e("header",{className:"widget-accordion-group-header"},e("div",{id:"".concat(l.id,"HeaderButton"),className:d("widget-accordion-group-header-button",{"widget-accordion-group-header-button-clickable":l.collapsible,"widget-accordion-group-header-button-icon-left":l.collapsible&&"left"===s,"widget-accordion-group-header-button-icon-right":l.collapsible&&"right"===s}),tabIndex:l.collapsible?0:void 0,"data-focusindex":0,role:"button",onClick:l.collapsible?u:void 0,onKeyDown:l.collapsible?x:void 0,"aria-expanded":!g,"aria-disabled":!l.collapsible,"aria-controls":"".concat(l.id,"ContentWrapper")},l.header,!l.collapsible||"left"!==s&&"right"!==s?null:null===(i=l.generateHeaderIcon)||void 0===i?void 0:i.call(l,null!=g&&g))),e("div",{ref:b,id:"".concat(l.id,"ContentWrapper"),className:"widget-accordion-group-content-wrapper","data-focusindex":0,onTransitionEnd:C,role:"region","aria-labelledby":"".concat(l.id,"HeaderButton")},e("div",{ref:f,className:"widget-accordion-group-content"},l.content))):null}function p(a){const o=n((t=a.singleExpandedGroup?"single":"multiple",(e,a)=>{if("expand"===a.type&&"single"===t)return e.map(((e,n)=>n!==a.index));const n=[...e];return n[a.index]="collapse"===a.type,n}));var t;const[r,c]=l(o.current,void 0,(()=>{const e=a.groups.map((e=>!a.previewMode&&a.collapsible&&!!e.initiallyCollapsed));if(!a.previewMode&&a.singleExpandedGroup){const a=e.lastIndexOf(!1);if(a>-1)for(let n=0;n<a;n++)e[n]=!0}return e})),s=n(a.groups.map((e=>e.collapsed)));i((()=>{a.groups.forEach(((e,a)=>{void 0!==e.collapsed&&e.collapsed!==s.current[a]&&(s.current[a]=e.collapsed,c({type:e.collapsed?"collapse":"expand",index:a}))}))}),[a.groups]);const u=n(null),p=a.groups.map(((n,o)=>e(g,{key:o,index:o,parent:u,id:"".concat(a.id,"AccordionGroup").concat(o),collapsible:a.collapsible,accordionGroupCollapsedStateDispatch:c,...n,collapsed:r[o],animateContent:a.animateContent,generateHeaderIcon:a.generateHeaderIcon,showHeaderIcon:a.showGroupHeaderIcon})));return e("div",{ref:u,id:a.id,className:d("widget-accordion",{"widget-accordion-preview":a.previewMode},a.class),style:a.style,"data-focusindex":a.tabIndex||0},p)}function g(a){const{accordionGroupCollapsedStateDispatch:n}=a,t=o((()=>{a.collapsed?n({type:"expand",index:a.index}):n({type:"collapse",index:a.index})}),[a.collapsed,n,a.index]),l=o(((e,n)=>{var o;if(a.parent.current&&e&&e instanceof Node){const t=Array.from(a.parent.current.querySelectorAll(":scope > .widget-accordion-group > .widget-accordion-group-header > .widget-accordion-group-header-button"));if(0===t.length)return;switch(n){case"first":t[0].focus();break;case"last":t[t.length-1].focus();break;case"previous":case"next":const a=t.findIndex((a=>a.isSameNode(e)));null===(o=t[a+("next"===n?1:-1)])||void 0===o||o.focus()}}}),[a.parent]);return e(u,{key:a.index,id:a.id,header:a.header,content:a.content,collapsed:a.collapsed,visible:a.visible,dynamicClassName:a.dynamicClassName,collapsible:a.collapsible,toggleCollapsed:t,onToggleCompletion:a.onToggleCompletion,changeFocus:l,animateContent:a.animateContent,generateHeaderIcon:a.generateHeaderIcon,showHeaderIcon:a.showHeaderIcon})}function v(a){let n="h1";switch(a.heading){case"headingTwo":n="h2";break;case"headingThree":n="h3";break;case"headingFour":n="h4";break;case"headingFive":n="h5";break;case"headingSix":n="h6"}return e(n,null,a.children)}function h(a){let{data:n,loading:o,animate:t}=a;return n?e(s,{icon:n,className:d("widget-accordion-group-header-button-icon",{"widget-accordion-group-header-button-icon-animate":t})}):o?null:e("svg",{className:d("widget-accordion-group-header-button-icon",{"widget-accordion-group-header-button-icon-animate":t}),"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M1.64598 4.64601C1.69242 4.59945 1.7476 4.5625 1.80834 4.5373C1.86909 4.51209 1.93421 4.49911 1.99998 4.49911C2.06575 4.49911 2.13087 4.51209 2.19161 4.5373C2.25236 4.5625 2.30753 4.59945 2.35398 4.64601L7.99998 10.293L13.646 4.64601C13.6925 4.59952 13.7477 4.56264 13.8084 4.53749C13.8691 4.51233 13.9342 4.49938 14 4.49938C14.0657 4.49938 14.1308 4.51233 14.1916 4.53749C14.2523 4.56264 14.3075 4.59952 14.354 4.64601C14.4005 4.6925 14.4373 4.74769 14.4625 4.80842C14.4877 4.86916 14.5006 4.93426 14.5006 5.00001C14.5006 5.06575 14.4877 5.13085 14.4625 5.19159C14.4373 5.25233 14.4005 5.30752 14.354 5.35401L8.35398 11.354C8.30753 11.4006 8.25236 11.4375 8.19161 11.4627C8.13087 11.4879 8.06575 11.5009 7.99998 11.5009C7.93421 11.5009 7.86909 11.4879 7.80834 11.4627C7.7476 11.4375 7.69242 11.4006 7.64598 11.354L1.64598 5.35401C1.59942 5.30756 1.56247 5.25239 1.53727 5.19164C1.51206 5.1309 1.49908 5.06578 1.49908 5.00001C1.49908 4.93424 1.51206 4.86912 1.53727 4.80837C1.56247 4.74763 1.59942 4.69245 1.64598 4.64601V4.64601Z"}))}function m(a){var t,l,r,c,d,s;const u=n(function(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}()),g=i((()=>function(a){if(function(e){return e.some((e=>void 0===e.visible.value||void 0===e.headerText.value||void 0===e.initiallyCollapsed.value||e.collapsed&&void 0===e.collapsed.value))}(a))return;return a.map((a=>{var n,o,t;let l=a.headerContent;return"text"===a.headerRenderMode&&(l=e(v,{heading:a.headerHeading},a.headerText.value)),{header:l,content:a.content,collapsed:null===(n=a.collapsed)||void 0===n?void 0:n.value,initiallyCollapsed:"dynamic"===a.initialCollapsedState?a.initiallyCollapsed.value:"collapsed"===a.initialCollapsedState,visible:a.visible.value,dynamicClassName:null===(o=a.dynamicClass)||void 0===o?void 0:o.value,onToggleCompletion:null===(t=a.collapsed)||void 0===t?void 0:t.setValue}}))}(a.groups)),[a.groups]),m=(w=a.animateIcon,b={data:null===(t=a.icon)||void 0===t?void 0:t.value,loading:"loading"===(null===(l=a.icon)||void 0===l?void 0:l.status)},f={data:null===(r=a.expandIcon)||void 0===r?void 0:r.value,loading:"loading"===(null===(c=a.expandIcon)||void 0===c?void 0:c.status)},C={data:null===(d=a.collapseIcon)||void 0===d?void 0:d.value,loading:"loading"===(null===(s=a.collapseIcon)||void 0===s?void 0:s.status)},o((a=>e(h,w?{...b,animate:w}:a?{...f,animate:w}:{...C,animate:w})),[w,b,f,C]));var w,b,f,C;return g?e(p,{id:"Accordion".concat(u.current),class:a.class,style:a.style,tabIndex:a.tabIndex,groups:g,collapsible:a.collapsible,animateContent:a.animate,singleExpandedGroup:a.collapsible?"singleExpanded"===a.expandBehavior:void 0,generateHeaderIcon:m,showGroupHeaderIcon:a.showIcon}):null}s.displayName="Icon";export{m as Accordion};
