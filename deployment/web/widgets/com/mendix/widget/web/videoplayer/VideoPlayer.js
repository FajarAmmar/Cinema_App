define(["react"],(function(e){"use strict";var t,r={exports:{}};
/*!
    Copyright (c) 2018 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */t=r,function(){var e={}.hasOwnProperty;function r(){for(var t=[],s=0;s<arguments.length;s++){var o=arguments[s];if(o){var i=typeof o;if("string"===i||"number"===i)t.push(o);else if(Array.isArray(o)){if(o.length){var n=r.apply(null,o);n&&t.push(n)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var a in o)e.call(o,a)&&o[a]&&t.push(a);else t.push(o.toString())}}return t.join(" ")}t.exports?(r.default=r,t.exports=r):window.classNames=r}();var s=r.exports;class o extends e.Component{render(){return e.createElement("div",{className:s(this.props.className,"size-box"),tabIndex:this.props.tabIndex,style:{...this.setDimensions(),...this.props.style}},e.createElement("div",{className:s("size-box-inner",this.props.classNameInner)},this.props.children))}setDimensions(){const{widthUnit:e,width:t,heightUnit:r,height:s,heightAspectRatio:o}=this.props,i={};switch(i.width="".concat(t,"percentage"===e?"%":"px"),r){case"pixels":i.paddingTop=s;break;case"percentageOfWidth":const r=s/100*t;i.paddingTop="percentage"===e?"".concat(r,"%"):r;break;case"percentageOfParent":i.paddingTop=0,i.height="".concat(s,"%");break;case"aspectRatio":let n=0;switch(o){case"oneByOne":n=1;break;case"fourByThree":n=3/4;break;case"threeByTwo":n=2/3;break;case"sixteenByNine":n=9/16;break;case"TwentyOneByNine":n=9/21}i.paddingTop="pixels"===e?t*n:"".concat(t*n,"%")}return i}}const i=e=>/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/g.test(e)?e:"";class n extends e.Component{constructor(){super(...arguments),this.handleAttributes=this.getUrlAttributes.bind(this)}render(){return e.createElement("iframe",{className:"widget-video-player-iframe",src:this.generateUrl(this.props.url),frameBorder:"0",allow:"autoplay; fullscreen",allowFullScreen:!0})}generateUrl(e){const t=this.handleAttributes();try{if(e.includes("dailymotion.com/embed"))return"".concat(e).concat(t);const r=e.split("/");if(r.length>0){const e=r[r.length-1];if(e)return"https://www.dailymotion.com/embed/video/".concat(e).concat(t)}}catch(t){return e}return e}getUrlAttributes(){let e="?sharing-enable=false";return e+="&autoplay="+(this.props.autoPlay?"true":"false"),e+="&mute="+(this.props.muted?"true":"false"),e+="&controls="+(this.props.showControls?"true":"false"),e}static canPlay(e){return!!e&&!!i(e)&&e.indexOf("dailymotion.com")>-1}}class a extends e.Component{constructor(){super(...arguments),this.videoElement=e.createRef(),this.errorElement=e.createRef(),this.handleOnSuccess=this.handleSuccess.bind(this),this.handleOnError=this.handleError.bind(this)}render(){return e.createElement("div",{className:s("widget-video-player-html5-container",{"widget-video-player-show-controls":this.props.showControls})},this.props.preview?e.createElement("svg",{className:"widget-video-player-preview-play-button",width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24Z",fill:"#373737"}),e.createElement("path",{d:"M16 12V36L34.8571 24L16 12Z",fill:"white"})):e.createElement("div",{className:"video-error-label-html5",ref:this.errorElement},"The video failed to load :("),e.createElement("video",{className:"widget-video-player-html5",controls:this.props.showControls,autoPlay:this.props.autoPlay,muted:this.props.muted,loop:this.props.loop,poster:this.props.poster,ref:this.videoElement,height:this.props.aspectRatio?void 0:"100%",preload:this.props.poster?"metadata":"auto"},this.props.preview?null:e.createElement("source",{src:this.props.url,type:"video/mp4",onError:this.handleOnError,onLoad:this.handleOnSuccess})))}handleError(){this.errorElement&&this.errorElement.current&&(this.errorElement.current.classList.add("hasError"),this.videoElement&&this.videoElement.current&&(this.videoElement.current.controls=!1))}handleSuccess(){this.errorElement&&this.errorElement.current&&(this.errorElement.current.classList.remove("hasError"),this.videoElement&&this.videoElement.current&&(this.videoElement.current.controls=this.props.showControls))}}class l extends e.Component{constructor(){super(...arguments),this.handleAttributes=this.getUrlAttributes.bind(this)}render(){return e.createElement("iframe",{className:"widget-video-player-iframe",src:this.generateUrl(this.props.url),frameBorder:"0",allow:"autoplay; fullscreen",allowFullScreen:!0})}generateUrl(e){const t=this.handleAttributes();try{if(e.includes("player.vimeo.com"))return"".concat(e).concat(t);const r=e.split("/");if(r.length>0){const e=r[r.length-1];if(Number(e)>0&&isFinite(Number(e)))return"https://player.vimeo.com/video/".concat(e).concat(t)}}catch(t){return e}return e}getUrlAttributes(){let e="?dnt=1";return e+="&autoplay="+(this.props.autoPlay?"1":"0"),e+="&muted="+(this.props.muted?"1":"0"),e+="&loop="+(this.props.loop?"1":"0"),e}static canPlay(e){return!!e&&!!i(e)&&e.indexOf("vimeo.com")>-1}}class p extends e.Component{constructor(){super(...arguments),this.handleAttributes=this.getUrlAttributes.bind(this)}render(){return e.createElement("iframe",{className:"widget-video-player-iframe",src:this.generateUrl(this.props.url),frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}generateUrl(e){const t=this.handleAttributes();try{if(e.includes("youtube.com/embed/"))return"".concat(e).concat(t);if(e.includes("youtu.be/")||e.includes("youtube.com/v/")){const r=e.split("/");if(r.length>0){const e=r[r.length-1];return"https://www.youtube.com/embed/".concat(e).concat(t)}}if(e.includes("youtube.com/watch?v=")){const r=e.split("watch?v=");if(r.length>0){const e=r[r.length-1];return"https://www.youtube.com/embed/".concat(e).concat(t)}}}catch(t){return e}return e}getUrlAttributes(){let e="?modestbranding=1&rel=0";return e+="&autoplay="+(this.props.autoPlay?"1":"0"),e+="&controls="+(this.props.showControls?"1":"0"),e+="&muted="+(this.props.muted?"1":"0"),e+="&loop="+(this.props.loop?"1":"0"),e}static canPlay(e){return!!e&&!!i(e)&&(e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1)}}class h extends e.Component{constructor(){super(...arguments),this.handleHtml5PlayerRender=this.renderHtml5Player.bind(this),this.handleYoutubePlayerRender=this.renderYoutubePlayer.bind(this),this.handleVimeoPlayerRender=this.renderVimeoPlayer.bind(this),this.handleDailymotionPlayerRender=this.renderDailymotionPlayer.bind(this)}render(){const e=this.props.url||"";return p.canPlay(e)?this.handleYoutubePlayerRender(e):l.canPlay(e)?this.handleVimeoPlayerRender(e):n.canPlay(e)?this.handleDailymotionPlayerRender(e):this.handleHtml5PlayerRender(e)}renderHtml5Player(t){return e.createElement(a,{showControls:this.props.showControls,autoPlay:this.props.autoStart,muted:this.props.muted,loop:this.props.loop,poster:this.props.poster,url:t,aspectRatio:this.props.aspectRatio,preview:this.props.preview})}renderYoutubePlayer(t){return e.createElement(p,{url:t,showControls:this.props.showControls,autoPlay:this.props.autoStart,muted:this.props.muted,loop:this.props.loop,aspectRatio:this.props.aspectRatio})}renderVimeoPlayer(t){return e.createElement(l,{url:t,autoPlay:this.props.autoStart,muted:this.props.muted,loop:this.props.loop,aspectRatio:this.props.aspectRatio})}renderDailymotionPlayer(t){return e.createElement(n,{url:t,autoPlay:this.props.autoStart,muted:this.props.muted,showControls:this.props.showControls,aspectRatio:this.props.aspectRatio})}}class c extends e.Component{render(){var t,r,i,n;const a="expression"===this.props.type,l=a?null===(t=this.props.urlExpression)||void 0===t?void 0:t.value:null===(r=this.props.videoUrl)||void 0===r?void 0:r.value,p=a?null===(i=this.props.posterExpression)||void 0===i?void 0:i.value:null===(n=this.props.posterUrl)||void 0===n?void 0:n.value,c=p?"".concat(l,"-").concat(p):l;return e.createElement(o,{className:s("widget-video-player widget-video-player-container",this.props.class),style:this.props.style,widthUnit:this.props.widthUnit,width:this.props.width,heightUnit:this.props.heightUnit,height:this.props.height,heightAspectRatio:this.props.heightAspectRatio,tabIndex:this.props.tabIndex},e.createElement(h,{key:c,url:l,poster:p,autoStart:this.props.autoStart,showControls:this.props.showControls,loop:this.props.loop,muted:this.props.muted,aspectRatio:"aspectRatio"===this.props.heightUnit,preview:!1}))}}return c}));
